import nltk
from nltk import pos_tag,word_tokenize,RegexpParser
from nltk.tree import Tree
nltk.download('punkt_tab')
nltk.download('averaged_perceptron_tagger_eng')
text = "The quick brown fox jumps over the lazy dog near the river bank"
tokens = word_tokenize(text)
pos_tags = pos_tag(tokens)
print("POS Tagged Sentence:\n",pos_tags)
print("-"*80)
chunk_grammar = r"""
  NP: {<DT>?<JJ>*<NN.*>+}
"""
chunk_parser = RegexpParser(chunk_grammar)
chunk_tree = chunk_parser.parse(pos_tags)
print("Chunking Result (Noun Phrases):")
for subtree in chunk_tree:
  if isinstance(subtree, Tree) and subtree.label() == 'NP':
    print(" ".join(word for word,pos in subtree.leaves()))
print("-"*80)
chink_grammar = r"""
  NP:{<.*>+}
  }<VB.*|IN>+{
"""
chink_parser = RegexpParser(chink_grammar)
chink_tree = chink_parser.parse(pos_tags)
print("Chinking Result (After Removing Verb & Prepositions):")
for subtree in chink_tree:
  if isinstance(subtree, Tree) and subtree.label() == 'NP':
    print(" ".join(word for word,pos in subtree.leaves()))
print("-"*80)
print("Chunk Tree Structure:\n")
print(chunk_tree.pformat(margin=70))
print("\n"+"="*80)
print("Chink Tree Structure:\n")
print(chink_tree.pformat(margin=70))

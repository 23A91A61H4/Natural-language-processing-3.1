import nltk
from collections import defaultdict,Counter
from nltk.util import bigrams
nltk.download('punkt_tab')
nltk.download('averaged_perceptron_tagger')
nltk.download('universal_tagset')
nltk.download('averaged_perceptron_tagger_eng')
text=""" Artificial Intelligence is transforming the world rapidly.
It is used in healthcare, education, business, and entertainment.
Machines are learning to understand human language and make predictions.
The future of AI holds enormous potential but also challenges."""

text1=""" That morning, the old man decided to run across the park,\
but the run was more difficult than he had expected.
He noticed that the children were playing near the river,\
and that made him smile.
Back in the city , people rushed to work, while others stayed back at home.
She said that it was important to remember that life can change quickly,\
and that hope must always stay alive."""

print("=== Input Paragraph ===\n")
print(text)
#Step-2
words = nltk.word_tokenize(text)
tagged_words = nltk.pos_tag(words,tagset='universal')
print("\n=== (a) POS Tagging ===\n")
print("Each word is assigned a grammatical tag:\n")
print(tagged_words)
#Step-3
word_tags = defaultdict(set)
for word, tag in tagged_words:
  word_tags[word.lower()].add(tag)
word_with_most_tags = max(word_tags.items(), key=lambda x: len(x[1]))
print("\n === (b) WORD WITH MOST DISTINCT TAGS ===\n")
print(f"Word:'{word_with_most_tags[0]}'")
print(f"Tags:{word_with_most_tags[1]}")
print("This word is used in different grammatical roles.")

all_tags = [tag for _, tag in tagged_words]
tag_freq = Counter(all_tags)
print("\n === (c) TAG FREQUNECY ===\n")
print("Tags sorted by decreasing frequency:")
for tag, freq in tag_freq.most_common():
  print(f"{tag:5} -> {freq}")
print("\n Common tags:")
tag_meanings = {
    "NOUN": "Noun (person,place,thing,idea)",
    "VERB": "Verb (action or state)",
    "ADJ": "Adjective (describes a noun)",
    "ADV": "Adverb (describes a verb/adjective)",
    "DET": "Determiner (the, a, this, that)",
    "PRON": "Pronoun (he, she, they)",
    "ADP": "Adposition(in, on, at, with)",
    "CONJ": "Conjunction(and, or, but)",
    "NUM": "Number (one,two, 100)",
    "PRT": "Particle(up, off, to)",
    ".": "Punctuation or sentence boundary",
    "X": "Other (foreign words, typos)"
}
for tag in list(tag_freq.keys()):
  if tag in tag_meanings:
    print(f"{tag:5} -> {tag_meanings[tag]}")
#Step-5
tagged_bigrams = list(bigrams(tagged_words))
after_noun = Counter(tag for (w1,t1),(w2,t2) in tagged_bigrams if t1=='NOUN')
print("\n === (d) TAGS AFTER NOUN ===")
for tag, freq in after_noun.most_common():
  print(f"{tag:5} -> {freq}")

print("- Verb after NOUN: subject-verb relation (e.g., 'AI holds').")
print("- ADP after NOUN: prepositions (e.g., 'world in').")
print("- DET after NOUN: determiner for another noun (e.g., 'world the').")
print("- Another NOUN: compound nouns (e.g., 'AI systems').")
